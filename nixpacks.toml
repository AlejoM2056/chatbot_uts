[phases.setup]
nixPkgs = ['php84', 'php84Extensions.pdo', 'php84Extensions.pdo_sqlite', 'php84Extensions.mbstring', 'php84Extensions.tokenizer', 'php84Extensions.xml', 'php84Extensions.ctype', 'php84Extensions.fileinfo']

[phases.install]
cmds = ['composer install --no-dev --optimize-autoloader --no-scripts']

[phases.build]
cmds = [
    'mkdir -p database storage/framework/sessions storage/framework/views storage/framework/cache',
    'touch database/database.sqlite',
    'chmod -R 775 storage bootstrap/cache database'
]

[start]
cmd = 'php -S 0.0.0.0:${PORT:-8080} -t public public/index.php'
